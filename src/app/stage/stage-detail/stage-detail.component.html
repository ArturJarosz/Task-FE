<wrapper [title]="stage?.name! + ',&nbsp;'" [secondaryTitle]="resolvedTypeLabel">
    <div wrapper-body>
        <p-accordion [multiple]="true">
            <form [formGroup]="stageDetailsForm">
                <p-accordionTab [selected]="true" header="Stage details" class="text-900 font-medium">
                    <div class="p-2">
                        <div class="flex flex-column lg:flex-row lg:justify-content-end align-items-center justify-content-end">
                            <p-button icon="pi pi-undo" [disabled]="!canReopen" [outlined]="true" [rounded]="true" (onClick)="onReopen()" class="update-button transition-colors px-1"></p-button>
                            <p-button icon="pi pi-ban" [disabled]="!canReject" [outlined]="true" [rounded]="true" (onClick)="onReject()" class="remove-button transition-colors px-1"></p-button>
                            <p-button *ngIf="stageDetailsForm && initialStageForm" icon="pi pi-arrow-down" [disabled]="!isUpdated()" [outlined]="true" [rounded]="true" (onClick)="onSave()" class="update-button transition-colors px-1"></p-button>
                            <p-button icon="pi pi-times" [outlined]="true" [rounded]="true" (onClick)="onDelete()" class="remove-button transition-colors px-1"></p-button>
                        </div>
                        <div class="grid grid-nogutter surface-border col-12 p-1 ">
                            <div class="md:col-4 p-1">
                                <div class="text-500 font-medium mb-1">Stage name</div>
                                <input formControlName="name" id="name" pInputText>
                            </div>
                            <div class="md:col-4 p-1">
                                <div class="text-500 font-medium mb-1">Type</div>
                                <p-dropdown formControlName="type" [options]="stageTypes!"
                                            optionLabel="label" optionValue="id"></p-dropdown>
                            </div>
                            <div class="md:col-4 p-1">
                                <div class="text-500 font-medium mb-1">Status</div>
                                <div class="p-1" id="status">{{ resolvedStatusLabel }}</div>
                            </div>
                        </div>
                        <div class="grid grid-nogutter surface-border col-12 p-1 ">
                            <div class="md:col-4 p-1">
                                <div class="text-500 font-medium mb-1">Start date</div>
                                <p-calendar formControlName="startDate" id="startDate" dateFormat="yy-mm-dd"></p-calendar>
                            </div>
                            <div class="md:col-4 p-1">
                                <div class="text-500 font-medium mb-1">Deadline</div>
                                <p-calendar formControlName="deadline" id="deadline" dateFormat="yy-mm-dd"></p-calendar>
                            </div>
                            <div class="md:col-4 p-1">
                                <div class="text-500 font-medium mb-1">End date</div>
                                <p-calendar formControlName="endDate" id="endDate" dateFormat="yy-mm-dd"></p-calendar>
                            </div>
                        </div>
                        <div class="grid grid-nogutter surface-border col-12 p-1 ">
                            <div class="md:col-12 p-1 p-1">
                                <div class="text-500 font-medium mb-1">Note</div>
                                <textarea formControlName="note" id="note" type="text" pInputTextarea rows="2"
                                          [autoResize]="true"></textarea>
                            </div>
                        </div>
                    </div>
                </p-accordionTab>
                <p-accordionTab [selected]="true" header="Tasks" class="text-900 font-medium">
                    <div *ngIf="stage" class="lg:px-2 md:px-2 px-2 py-1 ng-star-inserted surface-border">
                        <task-list-shell [tasks]="stage.tasks!" [stageId]="stage.id!" [projectId]="projectId">
                        </task-list-shell>
                    </div>
                </p-accordionTab>
            </form>
        </p-accordion>
    </div>
    <div wrapper-buttons>
    </div>
</wrapper>
